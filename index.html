<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8">
  <title>EmoCode Reader</title>
  <style>
    body {
      font-family: sans-serif;
      background: #f9f9f9;
      color: #333;
      padding: 1em;
    }
    h1 {
      font-size: 1.8em;
      color: #5c6ac4;
    }
    #video {
      border: 2px solid #ccc;
      border-radius: 12px;
      width: 100%;
      max-width: 480px;
    }
    #controls, #log, #result, #plugins {
      margin-top: 1em;
    }
    .plugin-toggle {
      margin: 0.5em 0;
    }
    #result {
      white-space: pre-wrap;
      background: #eef;
      padding: 1em;
      border-radius: 8px;
    }
  </style>
</head>
<body>
<h1>📸 EmoCode Reader</h1>
<video id="video" autoplay playsinline></video>
<div id="controls">
  <button onclick="captureAndRecognize()">📷 Capture & OCR</button>
</div>
<div id="plugins">
  <h2>🔌 Plugins</h2>
  <label class="plugin-toggle"><input type="checkbox" id="plugin-auth"> EmoAuth 🔐</label><br>
  <label class="plugin-toggle"><input type="checkbox" id="plugin-timelock"> EmoTimeLock ⏰</label><br>
  <label class="plugin-toggle"><input type="checkbox" id="plugin-ticket"> EmoTicket 🎫</label><br>
</div>
<div id="result"></div>
<div id="log"></div>
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@5.0.1/dist/tesseract.min.js"></script>
<script>
const video = document.getElementById('video');
const resultDiv = document.getElementById('result');
const logDiv = document.getElementById('log');
const plugins = {
  auth: document.getElementById('plugin-auth'),
  timelock: document.getElementById('plugin-timelock'),
  ticket: document.getElementById('plugin-ticket')
};async function initCamera() { try { const stream = await navigator.mediaDevices.getUserMedia({ video: true }); video.srcObject = stream; log('Camera initialized'); } catch (e) { log('Camera error: ' + e); } }

function captureAndRecognize() { const canvas = document.createElement('canvas'); canvas.width = video.videoWidth; canvas.height = video.videoHeight; const ctx = canvas.getContext('2d'); ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

Tesseract.recognize(canvas.toDataURL(), 'eng', { tessedit_char_whitelist: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789📱🔐🎫⏰" }) .then(({ data: { text } }) => { log('OCR complete'); resultDiv.innerText = parseEmoCode(text); }) .catch(err => log('OCR error: ' + err)); }

function parseEmoCode(text) { let output = Raw OCR: ${text}\n\n;

if (plugins.auth.checked) { output += '[🔐 EmoAuth enabled]\n'; // TODO: RSA decryption logic here } if (plugins.timelock.checked) { output += '[⏰ EmoTimeLock enabled]\n'; // TODO: Compare current date with embedded date } if (plugins.ticket.checked) { output += '[🎫 EmoTicket enabled]\n'; // TODO: Token validation logic }

// Extract URLs / Emails / Phone Numbers const urlMatch = text.match(/https?://[\w./-]+/); const mailMatch = text.match(/[\w.-]+@[\w.-]+.[a-z]+/); const phoneMatch = text.match(/+?[0-9]{8,15}/);

if (urlMatch) output += 📎 URL: ${urlMatch[0]}\n; if (mailMatch) output += ✉️ Email: ${mailMatch[0]}\n; if (phoneMatch) output += 📞 Phone: ${phoneMatch[0]}\n;

return output; }

function log(msg) { const time = new Date().toLocaleTimeString(); logDiv.innerText += [${time}] ${msg}\n; }

initCamera(); </script>

</body>
</html>
